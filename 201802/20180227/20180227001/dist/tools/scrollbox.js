var jQuery=$=require("jquery");$.fn.scrollbox=function(config){var defConfig={linear:!1,startDelay:2,delay:3,step:5,speed:32,switchItems:1,direction:"vertical",distance:"auto",autoPlay:!0,onMouseOverPause:!0,paused:!1,queue:null};return config=$.extend(defConfig,config),config.scrollOffset="vertical"===config.direction?"scrollTop":"scrollLeft",config.queue&&(config.queue=$("#"+config.queue)),this.each(function(){var containerUL,backward,forward,resetClock,scrollForward,scrollBackward,container=$(this),scrollingId=null,nextScrollId=null,paused=!1;config.onMouseOverPause&&(container.bind("mouseover",function(){paused=!0}),container.bind("mouseout",function(){paused=!1})),containerUL=container.children("ul:first-child"),scrollForward=function(){if(!paused){var curLi,i,newScrollOffset,scrollDistance,theStep;if(curLi=containerUL.children("li:first-child"),scrollDistance="auto"!==config.distance?config.distance:"vertical"===config.direction?curLi.height():curLi.width(),config.linear?newScrollOffset=Math.min(container[0][config.scrollOffset]+config.step,scrollDistance):(theStep=Math.max(3,parseInt(.3*(scrollDistance-container[0][config.scrollOffset]),10)),newScrollOffset=Math.min(container[0][config.scrollOffset]+theStep,scrollDistance)),container[0][config.scrollOffset]=newScrollOffset,newScrollOffset>=scrollDistance){for(i=0;i<config.switchItems;i++)config.queue&&config.queue.hasChildNodes()&&config.queue.getElementsByTagName("li").length>0?(containerUL.append(config.queue.getElementsByTagName("li")[0]),containerUL.remove(containerUL.children("li:first-child"))):containerUL.append(containerUL.children("li:first-child"));container[0][config.scrollOffset]=0,clearInterval(scrollingId),config.autoPlay&&(nextScrollId=setTimeout(forward,1e3*config.delay))}}},scrollBackward=function(){if(!paused){var curLi,i,newScrollOffset,scrollDistance,theStep;if(0===container[0][config.scrollOffset]){for(containerUL.children("li").length,i=0;i<config.switchItems;i++)containerUL.children("li:last-child").insertBefore(containerUL.children("li:first-child"));curLi=container.children("li:first-child"),scrollDistance="auto"!==config.distance?config.distance:"vertical"===config.direction?curLi.height():curLi.width(),container[0][config.scrollOffset]=scrollDistance}config.linear?newScrollOffset=Math.max(container[0][config.scrollOffset]-config.step,0):(theStep=Math.max(3,parseInt(.3*container[0][config.scrollOffset],10)),newScrollOffset=Math.max(container[0][config.scrollOffset]-theStep,0)),container[0][config.scrollOffset]=newScrollOffset,0===newScrollOffset&&(clearInterval(scrollingId),config.autoPlay&&(nextScrollId=setTimeout(forward,1e3*config.delay)))}},forward=function(){clearInterval(scrollingId),scrollingId=setInterval(scrollForward,config.speed)},backward=function(){clearInterval(scrollingId),scrollingId=setInterval(scrollBackward,config.speed)},resetClock=function(delay){config.delay=delay||config.delay,clearTimeout(nextScrollId),config.autoPlay&&(nextScrollId=setTimeout(forward,1e3*config.delay))},config.autoPlay&&(nextScrollId=setTimeout(forward,1e3*config.startDelay)),container.bind("resetClock",function(delay){resetClock(delay)}),container.bind("forward",function(){clearTimeout(nextScrollId),forward()}),container.bind("backward",function(){clearTimeout(nextScrollId),backward()}),container.bind("speedUp",function(speed){void 0===speed&&(speed=Math.max(1,parseInt(config.speed/2,10))),config.speed=speed}),container.bind("speedDown",function(speed){void 0===speed&&(speed=2*config.speed),config.speed=speed})})};