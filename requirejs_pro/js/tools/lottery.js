/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */


function lottery(c){function reset(){config=$.extend(defaultConfig,c),timeIntervalId=0,isRuning=!1,curStatus=0,giftIndex=-1,curIndex=0,runCount=0,endCallback=null,clearInterval(timeIntervalId)}function run(){1!=isRuning&&(reset(),isRuning=!0,focusToNext(),curStatus=1,myInterval("slow"))}function myInterval(speed){clearInterval(timeIntervalId);var time="fast"==speed?config.fastSpeed:config.slowSpeed;timeIntervalId=setInterval(function(){runCount++,curIndex=runCount%giftCount,focusToNext(),stepFunction()},time)}function focusToNext(){$lotteryBox.find(config.giftItem).removeClass(config.targetClass),$lotteryBox.find(config.giftItem+"[sort="+curIndex+"]").eq(0).addClass(config.targetClass)}function stepFunction(){if(1==curStatus&&runCount==config.startStep&&(curStatus=2,myInterval("fast")),2==curStatus&&runCount>=config.startStep+giftCount&&-1!=giftIndex){var needNum=giftCount-config.endStep-(curIndex-giftIndex);0!=needNum&&needNum!=giftCount||(curStatus=3,myInterval("slow"))}3==curStatus&&curIndex==giftIndex&&end()}function end(){clearInterval(timeIntervalId),isRuning=!1,setTimeout(function(){"function"==typeof endCallback&&endCallback()},200)}function forceEnd(_endCallback){endCallback=_endCallback,end(),$lotteryBox.find(config.giftItem).removeClass(config.targetClass)}function setGift(_giftIndex,_endCallback){giftIndex=_giftIndex,endCallback=_endCallback}var timeIntervalId,isRuning,curStatus,giftIndex,curIndex,runCount,endCallback,c=c||{},defaultConfig={lotteryBox:"#lotteryBox",giftItem:".giftItem",sort:[],targetClass:"on",fastSpeed:80,slowSpeed:400,startStep:4,endStep:4},config={};reset();var $lotteryBox=$(config.lotteryBox),giftCount=$lotteryBox.find(config.giftItem).length,idx=0;return config.sort&&config.sort.length==giftCount?$lotteryBox.find(config.giftItem).each(function(){$(this).attr("sort",config.sort[idx]),idx++}):$lotteryBox.find(config.giftItem).each(function(){$(this).attr("sort",idx),idx++}),$lotteryBox.find(config.giftItem).unbind("mouseenter").bind("mouseenter",function(){$(this).addClass("hover")}),$lotteryBox.find(config.giftItem).unbind("mouseleave").bind("mouseleave",function(){$(this).removeClass("hover")}),{run:run,setGift:setGift,forceEnd:forceEnd}}
//# sourceMappingURL=lottery.js.map