/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */


define(["require","exports","module","Modernizr"],function(require,exports,module){function random(min,max){return Math.random()*(max-min)+min}function calculateDistance(p1x,p1y,p2x,p2y){var xDistance=p1x-p2x,yDistance=p1y-p2y;return Math.sqrt(Math.pow(xDistance,2)+Math.pow(yDistance,2))}function Firework(sx,sy,tx,ty){for(this.x=sx,this.y=sy,this.sx=sx,this.sy=sy,this.tx=tx,this.ty=ty,this.distanceToTarget=calculateDistance(sx,sy,tx,ty),this.distanceTraveled=0,this.coordinates=[],this.coordinateCount=3;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=Math.atan2(ty-sy,tx-sx),this.speed=2,this.acceleration=1.05,this.brightness=random(50,70),this.targetRadius=1}function Particle(x,y){for(this.x=x,this.y=y,this.coordinates=[],this.coordinateCount=10;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=random(0,2*Math.PI),this.speed=random(1,10),this.friction=.95,this.gravity=1,this.hue=random(hue-50,hue+50),this.brightness=random(50,80),this.alpha=1,this.decay=random(.015,.03)}function createParticles(x,y){for(var particleCount=100;particleCount--;)particles.push(new Particle(x,y))}function loop(){requestAnimFrame(loop),hue=random(0,360),ctx.globalCompositeOperation="destination-out",ctx.fillStyle="rgba(0, 0, 0, 0.5)",ctx.fillRect(0,0,cw,ch),ctx.globalCompositeOperation="lighter";for(var i=fireworks.length;i--;)fireworks[i].draw(),fireworks[i].update(i);for(var i=particles.length;i--;)particles[i].draw(),particles[i].update(i);timerTick>=timerTotal?mousedown||(fireworks.push(new Firework(cw/2,ch,random(0,cw),random(0,ch/2))),timerTick=0):timerTick++,limiterTick>=limiterTotal?mousedown&&(fireworks.push(new Firework(cw/2,ch,mx,my)),limiterTick=0):limiterTick++}if(!require("Modernizr").canvas)return function(){};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}();var mx,my,canvas=document.getElementById("loop"),ctx=canvas.getContext("2d"),cw=1062,ch=390,fireworks=[],particles=[],hue=120,limiterTotal=10,limiterTick=0,timerTotal=20,timerTick=2e3,mousedown=!1;return canvas.width=cw,canvas.height=ch,Firework.prototype.update=function(index){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.targetRadius<8?this.targetRadius+=.3:this.targetRadius=1,this.speed*=this.acceleration;var vx=Math.cos(this.angle)*this.speed,vy=Math.sin(this.angle)*this.speed;this.distanceTraveled=calculateDistance(this.sx,this.sy,this.x+vx,this.y+vy),this.distanceTraveled>=this.distanceToTarget?(createParticles(this.tx,this.ty),fireworks.splice(index,1)):(this.x+=vx,this.y+=vy)},Firework.prototype.draw=function(){ctx.beginPath(),ctx.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),ctx.lineTo(this.x,this.y),ctx.strokeStyle="hsl("+hue+", 100%, "+this.brightness+"%)",ctx.stroke()},Particle.prototype.update=function(index){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&particles.splice(index,1)},Particle.prototype.draw=function(){ctx.beginPath(),ctx.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),ctx.lineTo(this.x,this.y),ctx.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",ctx.stroke()},loop});
//# sourceMappingURL=loop.js.map